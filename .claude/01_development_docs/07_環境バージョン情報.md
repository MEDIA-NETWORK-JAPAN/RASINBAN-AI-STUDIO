# 環境バージョン情報

**プロジェクト:** rasinban-ai-studio (Dify中継・管理プラットフォーム)
**作成日:** 2026-02-12
**最終更新:** 2026-02-12

## 目次

1. [バージョン一覧](#1-バージョン一覧)
2. [互換性マトリクス](#2-互換性マトリクス)
3. [既知の問題と注意事項](#3-既知の問題と注意事項)
4. [推奨設定](#4-推奨設定)

---

## 1. バージョン一覧

### 1.1 バックエンド環境

| カテゴリ | パッケージ | バージョン | リリース日 | 備考 |
|---------|----------|----------|-----------|------|
| **言語** | PHP | **8.5.2** | 2026-01-18 | ✅ 最新安定版 |
| **コンポーザー** | Composer | **2.9.5** | 2026-01-29 | ✅ 最新安定版 |

### 1.2 Laravelコアパッケージ

| パッケージ | バージョン | リリース日 | 必須PHPバージョン | 備考 |
|----------|----------|-----------|----------------|------|
| **laravel/framework** | **12.49.0** | 2026-02 | PHP ^8.2 | ✅ Laravel 12最新 |
| **laravel/jetstream** | **5.4.0** | 2025-11-25 | PHP ^8.2.0 | ✅ Laravel 11/12対応 |
| **livewire/livewire** | **3.7.7** | 2026-02-02 | PHP ^8.1 | ✅ Laravel 10/11/12対応 |
| **laravel/sanctum** | **4.3.0** | 2026-01-22 | PHP ^8.2 | ✅ Laravel 11/12対応 |
| **laravel/fortify** | **1.34.0** | 2026-01-26 | PHP ^8.1 | ✅ Laravel 10/11/12対応 |
| **laravel/tinker** | **2.10.x** | - | - | ✅ Laravel 12対応 |

### 1.3 開発ツール

| パッケージ | バージョン | リリース日 | 備考 |
|----------|----------|-----------|------|
| **laravel/sail** | **1.52.0** | 2026-01-01 | ✅ Laravel 9/10/11/12対応 |
| **laravel/pint** | **1.27.0** | 2026-01-05 | ✅ PHP ^8.2.0 |
| **phpunit/phpunit** | **11.5.50** | 2026-01-27 | ✅ PHP >=8.2 |
| **laravel/boost** | **2.0.x** | - | ✅ MCP対応 |
| **mockery/mockery** | **1.6.x** | - | ✅ テスト用 |
| **fakerphp/faker** | **1.23.x** | - | ✅ テストデータ生成 |

### 1.4 データベース

| ソフトウェア | バージョン | リリース日 | 備考 |
|------------|----------|-----------|------|
| **PostgreSQL** | **16.11** | 2026 Q1 | ✅ 最新安定版 |
| **Redis** | **8.4.0** | 2026 Q1 | ✅ 最新安定版 |

### 1.5 フロントエンド環境

| カテゴリ | パッケージ | バージョン | 備考 |
|---------|----------|----------|------|
| **ランタイム** | Node.js | **24.13.0** | ✅ LTS（2026-02まで） |
| **パッケージマネージャー** | npm | **11.8.0** | ✅ Node.js同梱 |
| **ビルドツール** | Vite | **5.4.21** | ✅ Laravel公式推奨 |
| **CSSフレームワーク** | Tailwind CSS | **3.4.19** | ✅ 最新安定版 |
| **PostCSS** | autoprefixer | **10.4.24** | ✅ 必須プラグイン |
| **Tailwindプラグイン** | @tailwindcss/forms | **0.5.11** | ✅ Jetstream使用 |
| **Tailwindプラグイン** | @tailwindcss/typography | **0.5.10** | ✅ オプション |
| **HTTPクライアント** | axios | **1.6.4** | ✅ Laravel標準 |
| **Laravelプラグイン** | laravel-vite-plugin | **1.0.0** | ✅ Vite統合 |
| **Alpine.js** | (Livewireに組み込み) | **v3.14+** | ✅ Livewire同梱 |

### 1.6 開発支援ツール

| ツール | バージョン | 用途 |
|-------|----------|------|
| **Xdebug** | 3.5.0 | PHP デバッグ |
| **Zend OPcache** | 8.5.2 | PHPパフォーマンス最適化 |
| **Mailpit** | latest | メールテスト用SMTPサーバー |

---

## 2. 互換性マトリクス

### 2.1 Laravel 12 互換性チェック

#### ✅ **Laravel Jetstream 5.4.0 + Laravel 12 互換性**

| 項目 | 確認結果 | 根拠 |
|------|---------|------|
| **対応Laravelバージョン** | ✅ **完全互換** | `composer.json` に `illuminate/console: ^11.0\|^12.0` と明記 |
| **対応PHPバージョン** | ✅ **完全互換** | `php: ^8.2.0`（PHP 8.5.2は8.2以上） |
| **Livewire対応** | ✅ **完全互換** | Jetstream 5.xはLivewire 3.x専用設計 |
| **Fortify依存** | ✅ **完全互換** | `laravel/fortify: ^1.20` |

**公式ドキュメント確認:**
- Jetstream 5.4.0の`composer.json`に`illuminate/console ^11.0|^12.0`と明記
- Laravel 12は2024年9月リリース、Jetstream 5.4.0は2025年11月リリース → **後方互換性あり**

---

#### ✅ **Livewire 3.7.7 + Laravel 12 互換性**

| 項目 | 確認結果 | 根拠 |
|------|---------|------|
| **対応Laravelバージョン** | ✅ **完全互換** | `illuminate/database: ^10.0\|^11.0\|^12.0` と明記 |
| **対応PHPバージョン** | ✅ **完全互換** | `php: ^8.1`（PHP 8.5.2は8.1以上） |
| **Alpine.js統合** | ✅ **組み込み済み** | Livewire 3.xにAlpine.js v3.14+が組み込まれている |

**公式ドキュメント確認:**
- Livewire 3.7.7は2026年2月リリース（先週）
- Laravel 10/11/12すべてに対応 → **最新版で問題なし**

---

#### ✅ **Laravel Sanctum 4.3.0 + Laravel 12 互換性**

| 項目 | 確認結果 | 根拠 |
|------|---------|------|
| **対応Laravelバージョン** | ✅ **完全互換** | `illuminate/console: ^11.0\|^12.0` と明記 |
| **対応PHPバージョン** | ✅ **完全互換** | `php: ^8.2`（PHP 8.5.2は8.2以上） |
| **準備状態** | ⚠️ **マイグレーション未実行** | `personal_access_tokens`テーブル未作成（意図的） |

**注記:**
- 設計書通り「準備のみ」の状態
- 将来の個人端末利用時に`php artisan vendor:publish --tag=sanctum-migrations`を実行

---

#### ✅ **Laravel Fortify 1.34.0 + Laravel 12 互換性**

| 項目 | 確認結果 | 根拠 |
|------|---------|------|
| **対応Laravelバージョン** | ✅ **完全互換** | `illuminate/support: ^10.0\|^11.0\|^12.0` と明記 |
| **対応PHPバージョン** | ✅ **完全互換** | `php: ^8.1`（PHP 8.5.2は8.1以上） |
| **Jetstream統合** | ✅ **完全互換** | Jetstream 5.4.0が依存関係として指定 |

---

### 2.2 開発ツール互換性

#### ✅ **Laravel Sail 1.52.0 互換性**

| 項目 | 確認結果 | 根拠 |
|------|---------|------|
| **対応Laravelバージョン** | ✅ **完全互換** | `illuminate/console: ^9.52.16\|^10.0\|^11.0\|^12.0` と明記 |
| **対応PHPバージョン** | ✅ **完全互換** | `php: ^8.0`（PHP 8.5.2は8.0以上） |
| **Dockerイメージ** | ✅ **PHP 8.5対応** | `sail-8.5/app` イメージ使用中 |

---

#### ✅ **PHPUnit 11.5.50 互換性**

| 項目 | 確認結果 | 根拠 |
|------|---------|------|
| **対応PHPバージョン** | ✅ **完全互換** | `php: >=8.2`（PHP 8.5.2は8.2以上） |
| **Laravel統合** | ✅ **完全互換** | Laravel 12標準テストフレームワーク |

---

### 2.3 データベース互換性

#### ✅ **PostgreSQL 16.11 + Laravel 12 互換性**

| 項目 | 確認結果 | 根拠 |
|------|---------|------|
| **Laravel対応バージョン** | ✅ **完全互換** | Laravel 12はPostgreSQL 13〜16をサポート |
| **接続確認** | ✅ **動作確認済み** | `sail artisan db:show`で正常接続確認 |
| **マイグレーション** | ✅ **動作確認済み** | Jetstream標準マイグレーション成功 |

**特記事項:**
- PostgreSQL 16は2023年9月リリース、Laravel 12は完全対応
- `BIGSERIAL`型が正常に動作

---

#### ✅ **Redis 8.4.0 + Laravel 12 互換性**

| 項目 | 確認結果 | 根拠 |
|------|---------|------|
| **Laravel対応バージョン** | ✅ **完全互換** | Laravel 12はRedis 5.x〜8.xをサポート |
| **用途** | ✅ **セッション/キャッシュ** | `.env`で`SESSION_DRIVER=redis`, `CACHE_STORE=redis` |

---

### 2.4 フロントエンド互換性

#### ✅ **Vite 5.4.21 + Laravel 12 互換性**

| 項目 | 確認結果 | 根拠 |
|------|---------|------|
| **Laravel統合** | ✅ **完全互換** | `laravel-vite-plugin: ^1.0.0` 使用 |
| **Node.js対応** | ✅ **完全互換** | Node.js 18.x以上をサポート（24.13.0使用） |
| **ビルド確認** | ✅ **動作確認済み** | `npm run build` 成功 |

---

#### ✅ **Tailwind CSS 3.4.19 + Jetstream 互換性**

| 項目 | 確認結果 | 根拠 |
|------|---------|------|
| **Jetstream対応** | ✅ **完全互換** | Jetstream 5.xはTailwind CSS 3.x専用設計 |
| **プラグイン** | ✅ **互換性あり** | `@tailwindcss/forms: ^0.5.11` 使用 |

---

## 3. 既知の問題と注意事項

### 3.1 現在の問題

| 問題 | 状態 | 影響 | 対応 |
|------|------|------|------|
| **Sanctum テーブル未作成** | ⚠️ **意図的** | テスト1件失敗（`DeleteAccountTest`） | 設計書通り「準備のみ」。必要時に`vendor:publish`実行 |

### 3.2 ホストPHP 8.1の問題

| 問題 | 状態 | 影響 | 対応 |
|------|------|------|------|
| **ホストPHPが8.1.2** | ⚠️ **制限あり** | ホストで`composer install`実行不可（`readonly`キーワード非対応） | `--ignore-platform-reqs`または`sail composer`コマンド使用 |

**推奨対応:**
```bash
# Composerコマンドは必ずSail経由で実行
./vendor/bin/sail composer [command]

# または、初回セットアップ時のみ
composer install --ignore-platform-reqs --no-scripts
```

---

## 4. 推奨設定

### 4.1 開発環境のベストプラクティス

#### **Composerコマンド実行**
```bash
# ✅ 推奨: Sail経由で実行（PHP 8.5環境）
./vendor/bin/sail composer install

# ❌ 非推奨: ホストで実行（PHP 8.1環境）
composer install
```

#### **Artisanコマンド実行**
```bash
# ✅ 推奨: Sail経由で実行
./vendor/bin/sail artisan migrate

# ❌ 非推奨: ホストで実行
php artisan migrate
```

#### **npm/Node.jsコマンド実行**
```bash
# ✅ 推奨: Sail経由で実行（Node.js 24.13.0環境）
./vendor/bin/sail npm install
./vendor/bin/sail npm run build

# ✅ 許容: ホストで実行も可能（Node.jsバージョンが一致していれば）
npm install
npm run build
```

---

### 4.2 パフォーマンス最適化

#### **OPcache設定（本番環境）**
```ini
; php.ini
opcache.enable=1
opcache.memory_consumption=256
opcache.interned_strings_buffer=16
opcache.max_accelerated_files=10000
opcache.validate_timestamps=0  # 本番環境のみ
```

#### **Redis設定**
```bash
# .env
CACHE_STORE=redis          # キャッシュにRedis使用
SESSION_DRIVER=redis       # セッションにRedis使用
QUEUE_CONNECTION=redis     # キューにRedis使用（将来）
```

---

### 4.3 セキュリティ推奨設定

#### **PHP設定**
```ini
; php.ini
expose_php=Off              # PHPバージョン非表示
display_errors=Off          # 本番環境でエラー非表示
log_errors=On               # エラーログ有効化
```

#### **PostgreSQL設定**
```bash
# .env（本番環境）
DB_CONNECTION=pgsql
DB_HOST=127.0.0.1           # localhostではなくIPアドレス
DB_PORT=5432
DB_DATABASE=rasinban_production
DB_USERNAME=rasinban_user   # rootではない専用ユーザー
DB_PASSWORD=<strong-password>
```

---

## 5. 互換性マトリクス総合評価

### ✅ **全体評価: 完全互換**

| カテゴリ | 評価 | 備考 |
|---------|------|------|
| **PHPバージョン** | ✅ **完全互換** | PHP 8.5.2はすべてのパッケージ要件を満たす |
| **Laravel 12互換性** | ✅ **完全互換** | Jetstream, Livewire, Sanctum, Fortifyすべて対応 |
| **データベース** | ✅ **完全互換** | PostgreSQL 16.11, Redis 8.4.0正常動作 |
| **フロントエンド** | ✅ **完全互換** | Vite 5, Tailwind CSS 3, Node.js 24正常動作 |
| **開発ツール** | ✅ **完全互換** | Sail, PHPUnit, Pint正常動作 |

---

## 6. バージョンアップ履歴

| 日付 | 対象 | 旧バージョン | 新バージョン | 備考 |
|------|------|------------|------------|------|
| 2026-02-12 | 全環境 | - | 上記バージョン | 初期セットアップ完了 |

---

## 7. 今後のバージョンアップ計画

### 7.1 短期（1〜3ヶ月）

- **監視のみ**: すべてのパッケージが最新安定版のため、当面はバージョンアップ不要
- **セキュリティパッチ**: 脆弱性報告があれば即座に対応

### 7.2 中期（3〜6ヶ月）

- **Laravel 12マイナーアップデート**: 12.x系の最新版に追従（`composer update`）
- **Livewire**: 3.x系の最新版に追従
- **Tailwind CSS**: 3.x系の最新版に追従

### 7.3 長期（6ヶ月〜1年）

- **Laravel 13リリース時**: 互換性確認後、移行計画策定
- **PHP 8.6リリース時**: 互換性確認後、移行計画策定
- **PostgreSQL 17リリース時**: 互換性確認後、移行計画策定

---

## 8. トラブルシューティング

### 8.1 よくある問題

#### **問題1: `composer install` がホストで失敗する**
```bash
# エラー: PHP 8.1.2では構文エラー
Parse error: syntax error, unexpected token "readonly"

# 解決策: Sail経由で実行
./vendor/bin/sail composer install
```

#### **問題2: テストで `personal_access_tokens` エラー**
```bash
# エラー: SQLSTATE[42P01]: Undefined table: relation "personal_access_tokens" does not exist

# 解決策: 設計書通り「準備のみ」のため、現時点では無視してOK
# 将来必要になったら以下を実行:
./vendor/bin/sail artisan vendor:publish --tag=sanctum-migrations
./vendor/bin/sail artisan migrate
```

#### **問題3: Node.jsバージョン不一致**
```bash
# 確認: ホストのNode.jsバージョン
node --version

# 解決策: Sail経由で実行
./vendor/bin/sail npm install
./vendor/bin/sail npm run build
```

---

## 9. 参考リンク

### 公式ドキュメント

- [Laravel 12 Documentation](https://laravel.com/docs/12.x)
- [Jetstream 5.x Documentation](https://jetstream.laravel.com/5.x/introduction.html)
- [Livewire 3 Documentation](https://livewire.laravel.com/docs/3.x/quickstart)
- [Laravel Sanctum Documentation](https://laravel.com/docs/12.x/sanctum)
- [Laravel Fortify Documentation](https://laravel.com/docs/12.x/fortify)
- [Laravel Sail Documentation](https://laravel.com/docs/12.x/sail)
- [Tailwind CSS 3 Documentation](https://tailwindcss.com/docs)
- [Vite Documentation](https://vite.dev/)
- [PostgreSQL 16 Documentation](https://www.postgresql.org/docs/16/)

---

**以上、環境バージョン情報と互換性チェック完了**
